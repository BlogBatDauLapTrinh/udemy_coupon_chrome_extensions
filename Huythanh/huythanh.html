<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>New Tab</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,400;0,700;1,300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
    <div class= "Bar">
        <div class = "fillter_courses">
            <div class="dropdown">
                <div class= "fillter">Categories</div>
                    <div class= "categories">
                        <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="All Categories" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>All Categories</span>
                            </label>
                        </div>
                            <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Development</span>
                            </label>
                        </div>
                        <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Business</span>
                            </label>
                        </div>
                        <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>IT & Software</span>
                            </label>
                        </div>
                        <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Office Productivity</span>
                            </label>
                        </div>
                        <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Personal Development</span>
                            </label>
                        </div>
                            <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Design</span>
                            </label>
                        </div>
                            <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Marketing</span>
                            </label>
                        </div>
                            <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Lifestyle</span>
                            </label>
                        </div>
                            <div class="categorie">
                            <input type="checkbox" name="categories" class="" value="Development" id="__BVID__88_BV_option_1">
                            <label class="custom-control-label" for="__BVID__88_BV_option_1">
                                    <span>Photography</span>
                            </label>
                        </div>

                                
                    </div>
                </div>
               
           
            
               
                <div class= "fillter">Rating</div>
                
                <div class= "fillter">Level</div>
                <div class= "fillter">Durations</div>
        </div>
        <div class = "searchbar">
            <input placeholder="Search for courses" class="searchInput"></input>
        </div>
            <button class ="searchIcon">Search</button>
            
    </div>
    <div class="colum">
        <div id ="container" class="container">
        
        </div>
    
        <div class="pagenumbers" id="pagination"></div>

    </div>
    
    <script >
const container_div = document.getElementById('container');
const pagination_div = document.getElementById('pagination');


today = new Date().getTime()

let current_page = 1;


DisplayList(current_page)

function DisplayList (page) {

    let apiUrl = 'https://teachinguide.azure-api.net/course-coupon?sortCol=featured&sortDir=DESC&discount=100&length=12&page='+ page +'&inkw=&language='
	
    fetch(apiUrl
).then((response)=>{
      return response.json();
  })
  .then((json) => {
    let courses = json["results"]
    let pages = json["pages"]
    container_div.innerHTML = ''
    pagination_div.innerHTML = ''
	for (let course of courses) {
	
     

          //tạo thẻ Ngày còn lại
          endTime =Date.parse(course['EndTime'])
            timeLeft = new Date(endTime-today)
             
            let remaining = document.createElement('div')
            remaining.classList.add('remaining_div')
            dayLeft = timeLeft.getDate() != 0 ? timeLeft.getDate()-1: timeLeft.getDate()
            remaining.textContent = dayLeft != 0 ? dayLeft === 1 ? dayLeft + ' day left' : dayLeft+ " days left" : timeLeft.getHours() === 1 ? timeLeft.getHours() + " hour left":  timeLeft.getHours() + " hours left"
            
            //tạo thẻ tác giả
            let author = document.createElement('p');
            author.classList.add('author_div')
            auContent=course['Author']
            if (auContent != null) 
            author.textContent= auContent

            //tạo thẻ category
            let category = document.createElement('div')
            category.classList.add('category')
            category.textContent = course['Category']

            //tạo thẻ review
            let review = document.createElement('div')
            review.classList.add('review')
            review.innerHTML= course['Reviews'] + '✍'

            //tạo thẻ rating
            let rating = document.createElement('div')
            rating.classList.add('rating_div')
            rating.textContent = course['Rating'] +'⭐'


            //tạo thẻ Img
            let img = document.createElement('img');
            img.src = course['ImageUrl'];
            img.setAttribute('width','100%');
            
            //tạo khung card
            let box = document.createElement('div')
            box.classList.add("box")

            box.appendChild(document.createElement('span')) 

            let content_div = document.createElement('div')
            content_div.classList.add("content")
            box.appendChild(content_div)

            //tao thẻ link
            let link= document.createElement('a')
            link.setAttribute('href', course['CouponLink'])
            link.setAttribute("target", "_blank")


            //Thêm các thành phần vào card
            content_div.appendChild(img);
            let h2_title = document.createElement('h2')
            title = course['Title']
            h2_title.textContent=title;
            content_div.append(h2_title)
            content_div.appendChild(rating)
            if (auContent != null) content_div.appendChild(author)
            content_div.appendChild(remaining)
            content_div.appendChild(category)
            content_div.appendChild(review)
            link.appendChild(box)
            container_div.appendChild(link);

		
	}

    // set up pagination
	for (let i = 1; i < pages + 1; i++) {
		let btn = PaginationButton(i);
        let a = document.createElement('a')
        a.setAttribute('href', "#container")
        a.appendChild(btn)
		pagination_div.appendChild(a);
	}
      
  })
  .catch(err=>{console.log(err)});

	
}
function PaginationButton (page) {
	let button = document.createElement('button');
	button.innerText = page;

	if (current_page == page) button.classList.add('active');

	button.addEventListener('click', function () {
		current_page = page;
		DisplayList(current_page);

		button.classList.add('active');
	});

	return button;
}

</script>
</body>
</html>